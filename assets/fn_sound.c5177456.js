var qn=Object.defineProperty,$n=Object.defineProperties;var Vn=Object.getOwnPropertyDescriptors;var Rt=Object.getOwnPropertySymbols;var Un=Object.prototype.hasOwnProperty,zn=Object.prototype.propertyIsEnumerable;var Pt=(u,c,w)=>c in u?qn(u,c,{enumerable:!0,configurable:!0,writable:!0,value:w}):u[c]=w,Re=(u,c)=>{for(var w in c||(c={}))Un.call(c,w)&&Pt(u,w,c[w]);if(Rt)for(var w of Rt(c))zn.call(c,w)&&Pt(u,w,c[w]);return u},ht=(u,c)=>$n(u,Vn(c));import{R as Qn,h as Me,Q as _e,m as Ge,k as Pe,l as Ne}from"./QInput.f78cc5aa.js";import{a as Wn,Q as jn}from"./index.725e3dd8.js";import{r as H,a as ne,o as Wt,B as Yn,X as Kn,V as Gn,h as le,ag as jt,x as Hn,z as Xn,s as Ze,d as Jn,e as tt,c as je,n as bt,w as Le,l as Zn,m as er,b as nt,ah as tr,ai as nr,i as Qe,Q as rr,a0 as Ue,aj as ar,R as He,ak as mt,p as Nt,S as gt,T as or,al as ur,ae as ir,Z as lr,A as Yt,E as we,C as ke,D as $,G as _t,L as Kt,F as B,H as ie,N as yt,M as We,am as sr,K as Gt,an as cr,J as fr,I as Lt}from"./index.4094c5d8.js";import{b as dr,c as kt,j as vr,Q as ze}from"./QDialog.943933a5.js";import{r as hr,Q as et,a as Mt}from"./QCardActions.4388118f.js";import{Q as Ht}from"./QItemSection.28b5c10d.js";import{Q as Xt,b as Jt}from"./QList.24db9dad.js";import{j as mr,u as gr,a as pr,e as br,f as _r,Q as yr}from"./QPage.a1ae4f9c.js";import{c as Xe,a as Je,_ as wr}from"./Editor.785434c5.js";let Er=0;const Cr=["click","keydown"],Sr={icon:String,label:[Number,String],alert:[Boolean,String],alertIcon:String,name:{type:[Number,String],default:()=>`t_${Er++}`},noCaps:Boolean,tabindex:[String,Number],disable:Boolean,contentClass:String,ripple:{type:[Boolean,Object],default:!0}};function Fr(u,c,w,T){const p=Kn(jt,()=>{console.error("QTab/QRouteTab component needs to be child of QTabs")}),{proxy:s}=tt(),E=H(null),D=H(null),U=H(null),x=ne(()=>u.disable===!0||u.ripple===!1?!1:Object.assign({keyCodes:[13,32],early:!0},u.ripple===!0?{}:u.ripple)),R=ne(()=>p.currentModel.value===u.name),h=ne(()=>"q-tab relative-position self-stretch flex flex-center text-center"+(R.value===!0?" q-tab--active"+(p.tabProps.value.activeClass?" "+p.tabProps.value.activeClass:"")+(p.tabProps.value.activeColor?` text-${p.tabProps.value.activeColor}`:"")+(p.tabProps.value.activeBgColor?` bg-${p.tabProps.value.activeBgColor}`:""):" q-tab--inactive")+(u.icon&&u.label&&p.tabProps.value.inlineLabel===!1?" q-tab--full":"")+(u.noCaps===!0||p.tabProps.value.noCaps===!0?" q-tab--no-caps":"")+(u.disable===!0?" disabled":" q-focusable q-hoverable cursor-pointer")+(T!==void 0&&T.linkClass.value!==""?` ${T.linkClass.value}`:"")),b=ne(()=>"q-tab__content self-stretch flex-center relative-position q-anchor--skip non-selectable "+(p.tabProps.value.inlineLabel===!0?"row no-wrap q-tab__content--inline":"column")+(u.contentClass!==void 0?` ${u.contentClass}`:"")),N=ne(()=>u.disable===!0||p.hasFocus.value===!0?-1:u.tabindex||0);function M(O,j){if(j!==!0&&E.value!==null&&E.value.focus(),u.disable!==!0){let v;if(T!==void 0)if(T.hasRouterLink.value===!0)v=()=>{O.__qNavigate=!0,p.avoidRouteWatcher=!0;const I=T.navigateToRouterLink(O);I===!1?p.avoidRouteWatcher=!1:I.then(F=>{p.avoidRouteWatcher=!1,F===void 0&&p.updateModel({name:u.name,fromRoute:!0})})};else{w("click",O);return}else v=()=>{p.updateModel({name:u.name,fromRoute:!1})};w("click",O,v),O.defaultPrevented!==!0&&v()}}function re(O){Hn(O,[13,32])?M(O,!0):Xn(O)!==!0&&O.keyCode>=35&&O.keyCode<=40&&p.onKbdNavigate(O.keyCode,s.$el)===!0&&Ze(O),w("keydown",O)}function q(){const O=p.tabProps.value.narrowIndicator,j=[],v=le("div",{ref:U,class:["q-tab__indicator",p.tabProps.value.indicatorClass]});u.icon!==void 0&&j.push(le(Me,{class:"q-tab__icon",name:u.icon})),u.label!==void 0&&j.push(le("div",{class:"q-tab__label"},u.label)),u.alert!==!1&&j.push(u.alertIcon!==void 0?le(Me,{class:"q-tab__alert-icon",color:u.alert!==!0?u.alert:void 0,name:u.alertIcon}):le("div",{class:"q-tab__alert"+(u.alert!==!0?` text-${u.alert}`:"")})),O===!0&&j.push(v);const I=[le("div",{class:"q-focus-helper",tabindex:-1,ref:E}),le("div",{class:b.value},Jn(c.default,j))];return O===!1&&I.push(v),I}const Z={name:ne(()=>u.name),rootRef:D,tabIndicatorRef:U,routerProps:T};Wt(()=>{p.unregisterTab(Z),p.recalculateScroll()}),Yn(()=>{p.registerTab(Z),p.recalculateScroll()});function W(O,j){const v=Re({ref:D,class:h.value,tabindex:N.value,role:"tab","aria-selected":R.value===!0?"true":"false","aria-disabled":u.disable===!0?"true":void 0,onClick:M,onKeydown:re},j);return Gn(le(O,v,q()),[[Qn,x.value]])}return{renderTab:W,$tabs:p}}var Ot=je({name:"QTab",props:Sr,emits:Cr,setup(u,{slots:c,emit:w}){const{renderTab:T}=Fr(u,c,w);return()=>T("div")}});function xr(u,c,w){const T=w===!0?["left","right"]:["top","bottom"];return`absolute-${c===!0?T[0]:T[1]}${u?` text-${u}`:""}`}const Ar=["left","center","right","justify"],qt=()=>{};var Dr=je({name:"QTabs",props:{modelValue:[Number,String],align:{type:String,default:"center",validator:u=>Ar.includes(u)},breakpoint:{type:[String,Number],default:600},vertical:Boolean,shrink:Boolean,stretch:Boolean,activeClass:String,activeColor:String,activeBgColor:String,indicatorColor:String,leftIcon:String,rightIcon:String,outsideArrows:Boolean,mobileArrows:Boolean,switchIndicator:Boolean,narrowIndicator:Boolean,inlineLabel:Boolean,noCaps:Boolean,dense:Boolean,contentClass:String,"onUpdate:modelValue":[Function,Array]},setup(u,{slots:c,emit:w}){const T=tt(),{proxy:{$q:p}}=T,{registerTick:s}=dr(),{registerTimeout:E,removeTimeout:D}=kt(),{registerTimeout:U}=kt(),x=H(null),R=H(null),h=H(u.modelValue),b=H(!1),N=H(!0),M=H(!1),re=H(!1),q=ne(()=>p.platform.is.desktop===!0||u.mobileArrows===!0),Z=[],W=H(!1);let O=!1,j,v,I,F=q.value===!0?Ce:bt;const k=ne(()=>({activeClass:u.activeClass,activeColor:u.activeColor,activeBgColor:u.activeBgColor,indicatorClass:xr(u.indicatorColor,u.switchIndicator,u.vertical),narrowIndicator:u.narrowIndicator,inlineLabel:u.inlineLabel,noCaps:u.noCaps})),ae=ne(()=>`q-tabs__content--align-${b.value===!0?"left":re.value===!0?"justify":u.align}`),G=ne(()=>`q-tabs row no-wrap items-center q-tabs--${b.value===!0?"":"not-"}scrollable q-tabs--${u.vertical===!0?"vertical":"horizontal"} q-tabs__arrows--${q.value===!0&&u.outsideArrows===!0?"outside":"inside"}`+(u.dense===!0?" q-tabs--dense":"")+(u.shrink===!0?" col-shrink":"")+(u.stretch===!0?" self-stretch":"")),ee=ne(()=>"q-tabs__content row no-wrap items-center self-stretch hide-scrollbar relative-position "+ae.value+(u.contentClass!==void 0?` ${u.contentClass}`:"")+(p.platform.is.mobile===!0?" scroll":"")),te=ne(()=>u.vertical===!0?{container:"height",content:"offsetHeight",scroll:"scrollHeight"}:{container:"width",content:"offsetWidth",scroll:"scrollWidth"}),A=ne(()=>u.vertical!==!0&&p.lang.rtl===!0),z=ne(()=>hr===!1&&A.value===!0);Le(A,F),Le(()=>u.modelValue,g=>{ce({name:g,setCurrent:!0,skipEmit:!0})}),Le(()=>u.outsideArrows,()=>{Qe(ve())}),Le(q,g=>{F=g===!0?Ce:bt,Qe(ve())});function ce({name:g,setCurrent:P,skipEmit:V,fromRoute:X}){h.value!==g&&(V!==!0&&w("update:modelValue",g),(P===!0||u["onUpdate:modelValue"]===void 0)&&(Fe(h.value,g),h.value=g)),X!==void 0&&(O=X)}function ve(){s(()=>{T.isDeactivated!==!0&&T.isUnmounted!==!0&&he({width:x.value.offsetWidth,height:x.value.offsetHeight})})}function he(g){if(te.value===void 0||R.value===null)return;const P=g[te.value.container],V=Math.min(R.value[te.value.scroll],Array.prototype.reduce.call(R.value.children,(Q,ue)=>Q+(ue[te.value.content]||0),0)),X=P>0&&V>P;b.value!==X&&(b.value=X),X===!0&&Qe(F);const oe=P<parseInt(u.breakpoint,10);re.value!==oe&&(re.value=oe)}function Fe(g,P){const V=g!=null&&g!==""?Z.find(oe=>oe.name.value===g):null,X=P!=null&&P!==""?Z.find(oe=>oe.name.value===P):null;if(V&&X){const oe=V.tabIndicatorRef.value,Q=X.tabIndicatorRef.value;clearTimeout(j),oe.style.transition="none",oe.style.transform="none",Q.style.transition="none",Q.style.transform="none";const ue=oe.getBoundingClientRect(),J=Q.getBoundingClientRect();Q.style.transform=u.vertical===!0?`translate3d(0,${ue.top-J.top}px,0) scale3d(1,${J.height?ue.height/J.height:1},1)`:`translate3d(${ue.left-J.left}px,0,0) scale3d(${J.width?ue.width/J.width:1},1,1)`,Qe(()=>{j=setTimeout(()=>{Q.style.transition="transform .25s cubic-bezier(.4, 0, .2, 1)",Q.style.transform="none"},70)})}X&&b.value===!0&&me(X.rootRef.value)}function me(g){const{left:P,width:V,top:X,height:oe}=R.value.getBoundingClientRect(),Q=g.getBoundingClientRect();let ue=u.vertical===!0?Q.top-X:Q.left-P;if(ue<0){R.value[u.vertical===!0?"scrollTop":"scrollLeft"]+=Math.floor(ue),F();return}ue+=u.vertical===!0?Q.height-oe:Q.width-V,ue>0&&(R.value[u.vertical===!0?"scrollTop":"scrollLeft"]+=Math.ceil(ue),F())}function Ce(){const g=R.value;if(g!==null){const P=g.getBoundingClientRect(),V=u.vertical===!0?g.scrollTop:Math.abs(g.scrollLeft);A.value===!0?(N.value=Math.ceil(V+P.width)<g.scrollWidth-1,M.value=V>0):(N.value=V>0,M.value=u.vertical===!0?Math.ceil(V+P.height)<g.scrollHeight:Math.ceil(V+P.width)<g.scrollWidth)}}function y(g){fe(),xe(g),v=setInterval(()=>{xe(g)===!0&&fe()},5)}function _(){y(z.value===!0?Number.MAX_SAFE_INTEGER:0)}function S(){y(z.value===!0?0:Number.MAX_SAFE_INTEGER)}function fe(){clearInterval(v)}function Se(g,P){const V=Array.prototype.filter.call(R.value.children,J=>J===P||J.matches&&J.matches(".q-tab.q-focusable")===!0),X=V.length;if(X===0)return;if(g===36)return me(V[0]),!0;if(g===35)return me(V[X-1]),!0;const oe=g===(u.vertical===!0?38:37),Q=g===(u.vertical===!0?40:39),ue=oe===!0?-1:Q===!0?1:void 0;if(ue!==void 0){const J=A.value===!0?-1:1,ge=V.indexOf(P)+ue*J;return ge>=0&&ge<X&&(me(V[ge]),V[ge].focus({preventScroll:!0})),!0}}const Oe=ne(()=>z.value===!0?{get:g=>Math.abs(g.scrollLeft),set:(g,P)=>{g.scrollLeft=-P}}:u.vertical===!0?{get:g=>g.scrollTop,set:(g,P)=>{g.scrollTop=P}}:{get:g=>g.scrollLeft,set:(g,P)=>{g.scrollLeft=P}});function xe(g){const P=R.value,{get:V,set:X}=Oe.value;let oe=!1,Q=V(P);const ue=g<Q?-1:1;return Q+=ue*5,Q<0?(oe=!0,Q=0):(ue===-1&&Q<=g||ue===1&&Q>=g)&&(oe=!0,Q=g),X(P,Q),F(),oe}function ye(){return Z.filter(g=>g.routerProps!==void 0&&g.routerProps.hasRouterLink.value===!0)}function rt(){let g=null,P=O;const V={matchedLen:0,hrefLen:0,exact:!1,found:!1},{hash:X}=T.proxy.$route,oe=h.value;let Q=P===!0?qt:J=>{oe===J.name.value&&(P=!0,Q=qt)};const ue=ye();for(const J of ue){const ge=J.routerProps.exact.value===!0;if(J.routerProps[ge===!0?"linkIsExactActive":"linkIsActive"].value!==!0||V.exact===!0&&ge!==!0){Q(J);continue}const De=J.routerProps.linkRoute.value,Ie=De.hash;if(ge===!0){if(X===Ie){g=J.name.value;break}else if(X!==""&&Ie!==""){Q(J);continue}}const Be=De.matched.length,qe=De.href.length-Ie.length;if(Be===V.matchedLen?qe>V.hrefLen:Be>V.matchedLen){g=J.name.value,Object.assign(V,{matchedLen:Be,hrefLen:qe,exact:ge});continue}Q(J)}(P===!0||g!==null)&&ce({name:g,setCurrent:!0,fromRoute:!0})}function at(g){if(D(),W.value!==!0&&x.value!==null&&g.target&&typeof g.target.closest=="function"){const P=g.target.closest(".q-tab");P&&x.value.contains(P)===!0&&(W.value=!0)}}function ot(){E(()=>{W.value=!1},30)}function Ae(){be.avoidRouteWatcher!==!0&&U(rt)}function ut(g){Z.push(g),ye().length>0&&(I===void 0&&(I=Le(()=>T.proxy.$route,Ae)),Ae())}function it(g){Z.splice(Z.indexOf(g),1),I!==void 0&&(ye().length===0&&(I(),I=void 0),Ae())}const be={currentModel:h,tabProps:k,hasFocus:W,registerTab:ut,unregisterTab:it,verifyRouteModel:Ae,updateModel:ce,recalculateScroll:ve,onKbdNavigate:Se,avoidRouteWatcher:!1};tr(jt,be),Wt(()=>{clearTimeout(j),I!==void 0&&I()});let Ye=!1;return Zn(()=>{Ye=!0}),er(()=>{Ye===!0&&ve()}),()=>{const g=[le(nr,{onResize:he}),le("div",{ref:R,class:ee.value,onScroll:F},nt(c.default))];return q.value===!0&&g.push(le(Me,{class:"q-tabs__arrow q-tabs__arrow--left absolute q-tab__icon"+(N.value===!0?"":" q-tabs__arrow--faded"),name:u.leftIcon||p.iconSet.tabs[u.vertical===!0?"up":"left"],onMousedown:_,onTouchstartPassive:_,onMouseup:fe,onMouseleave:fe,onTouchend:fe}),le(Me,{class:"q-tabs__arrow q-tabs__arrow--right absolute q-tab__icon"+(M.value===!0?"":" q-tabs__arrow--faded"),name:u.rightIcon||p.iconSet.tabs[u.vertical===!0?"down":"right"],onMousedown:S,onTouchstartPassive:S,onMouseup:fe,onMouseleave:fe,onTouchend:fe})),le("div",{ref:x,class:G.value,role:"tablist",onFocusin:at,onFocusout:ot},g)}}});const wt={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},Ir=Object.keys(wt);wt.all=!0;function $t(u){const c={};for(const w of Ir)u[w]===!0&&(c[w]=!0);return Object.keys(c).length===0?wt:(c.horizontal===!0?c.left=c.right=!0:c.left===!0&&c.right===!0&&(c.horizontal=!0),c.vertical===!0?c.up=c.down=!0:c.up===!0&&c.down===!0&&(c.vertical=!0),c.horizontal===!0&&c.vertical===!0&&(c.all=!0),c)}function Vt(u,c){return c.event===void 0&&u.target!==void 0&&u.target.draggable!==!0&&typeof c.handler=="function"&&u.target.nodeName.toUpperCase()!=="INPUT"&&(u.qClonedBy===void 0||u.qClonedBy.indexOf(c.uid)===-1)}function Br(u){const c=[.06,6,50];return typeof u=="string"&&u.length&&u.split(":").forEach((w,T)=>{const p=parseFloat(w);p&&(c[T]=p)}),c}var Tr=rr({name:"touch-swipe",beforeMount(u,{value:c,arg:w,modifiers:T}){if(T.mouse!==!0&&Ue.has.touch!==!0)return;const p=T.mouseCapture===!0?"Capture":"",s={handler:c,sensitivity:Br(w),direction:$t(T),noop:bt,mouseStart(E){Vt(E,s)&&ar(E)&&(He(s,"temp",[[document,"mousemove","move",`notPassive${p}`],[document,"mouseup","end","notPassiveCapture"]]),s.start(E,!0))},touchStart(E){if(Vt(E,s)){const D=E.target;He(s,"temp",[[D,"touchmove","move","notPassiveCapture"],[D,"touchcancel","end","notPassiveCapture"],[D,"touchend","end","notPassiveCapture"]]),s.start(E)}},start(E,D){Ue.is.firefox===!0&&mt(u,!0);const U=Nt(E);s.event={x:U.left,y:U.top,time:Date.now(),mouse:D===!0,dir:!1}},move(E){if(s.event===void 0)return;if(s.event.dir!==!1){Ze(E);return}const D=Date.now()-s.event.time;if(D===0)return;const U=Nt(E),x=U.left-s.event.x,R=Math.abs(x),h=U.top-s.event.y,b=Math.abs(h);if(s.event.mouse!==!0){if(R<s.sensitivity[1]&&b<s.sensitivity[1]){s.end(E);return}}else if(R<s.sensitivity[2]&&b<s.sensitivity[2])return;const N=R/D,M=b/D;s.direction.vertical===!0&&R<b&&R<100&&M>s.sensitivity[0]&&(s.event.dir=h<0?"up":"down"),s.direction.horizontal===!0&&R>b&&b<100&&N>s.sensitivity[0]&&(s.event.dir=x<0?"left":"right"),s.direction.up===!0&&R<b&&h<0&&R<100&&M>s.sensitivity[0]&&(s.event.dir="up"),s.direction.down===!0&&R<b&&h>0&&R<100&&M>s.sensitivity[0]&&(s.event.dir="down"),s.direction.left===!0&&R>b&&x<0&&b<100&&N>s.sensitivity[0]&&(s.event.dir="left"),s.direction.right===!0&&R>b&&x>0&&b<100&&N>s.sensitivity[0]&&(s.event.dir="right"),s.event.dir!==!1?(Ze(E),s.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),vr(),s.styleCleanup=re=>{s.styleCleanup=void 0,document.body.classList.remove("non-selectable");const q=()=>{document.body.classList.remove("no-pointer-events--children")};re===!0?setTimeout(q,50):q()}),s.handler({evt:E,touch:s.event.mouse!==!0,mouse:s.event.mouse,direction:s.event.dir,duration:D,distance:{x:R,y:b}})):s.end(E)},end(E){s.event!==void 0&&(gt(s,"temp"),Ue.is.firefox===!0&&mt(u,!1),s.styleCleanup!==void 0&&s.styleCleanup(!0),E!==void 0&&s.event.dir!==!1&&Ze(E),s.event=void 0)}};u.__qtouchswipe=s,T.mouse===!0&&He(s,"main",[[u,"mousedown","mouseStart",`passive${p}`]]),Ue.has.touch===!0&&He(s,"main",[[u,"touchstart","touchStart",`passive${T.capture===!0?"Capture":""}`],[u,"touchmove","noop","notPassiveCapture"]])},updated(u,c){const w=u.__qtouchswipe;w!==void 0&&(c.oldValue!==c.value&&(typeof c.value!="function"&&w.end(),w.handler=c.value),w.direction=$t(c.modifiers))},beforeUnmount(u){const c=u.__qtouchswipe;c!==void 0&&(gt(c,"main"),gt(c,"temp"),Ue.is.firefox===!0&&mt(u,!1),c.styleCleanup!==void 0&&c.styleCleanup(),delete u.__qtouchswipe)}});function Rr(){const u=new Map;return{getCache:function(c,w){return u[c]===void 0?u[c]=w:u[c]},getCacheWithFn:function(c,w){return u[c]===void 0?u[c]=w():u[c]}}}const Pr={name:{required:!0},disable:Boolean},Ut={setup(u,{slots:c}){return()=>le("div",{class:"q-panel scroll",role:"tabpanel"},nt(c.default))}},Nr={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},Lr=["update:modelValue","before-transition","transition"];function kr(){const{props:u,emit:c,proxy:w}=tt(),{getCacheWithFn:T}=Rr();let p,s;const E=H(null),D=H(null);function U(A){const z=u.vertical===!0?"up":"left";F((w.$q.lang.rtl===!0?-1:1)*(A.direction===z?1:-1))}const x=ne(()=>[[Tr,U,void 0,{horizontal:u.vertical!==!0,vertical:u.vertical,mouse:!0}]]),R=ne(()=>u.transitionPrev||`slide-${u.vertical===!0?"down":"right"}`),h=ne(()=>u.transitionNext||`slide-${u.vertical===!0?"up":"left"}`),b=ne(()=>`--q-transition-duration: ${u.transitionDuration}ms`),N=ne(()=>typeof u.modelValue=="string"||typeof u.modelValue=="number"?u.modelValue:String(u.modelValue)),M=ne(()=>({include:u.keepAliveInclude,exclude:u.keepAliveExclude,max:u.keepAliveMax})),re=ne(()=>u.keepAliveInclude!==void 0||u.keepAliveExclude!==void 0);Le(()=>u.modelValue,(A,z)=>{const ce=O(A)===!0?j(A):-1;s!==!0&&I(ce===-1?0:ce<j(z)?-1:1),E.value!==ce&&(E.value=ce,c("before-transition",A,z),Qe(()=>{c("transition",A,z)}))});function q(){F(1)}function Z(){F(-1)}Object.assign(w,{next:q,previous:Z,goTo:W});function W(A){c("update:modelValue",A)}function O(A){return A!=null&&A!==""}function j(A){return p.findIndex(z=>z.props.name===A&&z.props.disable!==""&&z.props.disable!==!0)}function v(){return p.filter(A=>A.props.disable!==""&&A.props.disable!==!0)}function I(A){const z=A!==0&&u.animated===!0&&E.value!==-1?"q-transition--"+(A===-1?R.value:h.value):null;D.value!==z&&(D.value=z)}function F(A,z=E.value){let ce=z+A;for(;ce>-1&&ce<p.length;){const ve=p[ce];if(ve!==void 0&&ve.props.disable!==""&&ve.props.disable!==!0){I(A),s=!0,c("update:modelValue",ve.props.name),setTimeout(()=>{s=!1});return}ce+=A}u.infinite===!0&&p.length>0&&z!==-1&&z!==p.length&&F(A,A===-1?p.length:-1)}function k(){const A=j(u.modelValue);return E.value!==A&&(E.value=A),!0}function ae(){const A=O(u.modelValue)===!0&&k()&&p[E.value];return u.keepAlive===!0?[le(ur,M.value,[le(re.value===!0?T(N.value,()=>ht(Re({},Ut),{name:N.value})):Ut,{key:N.value,style:b.value},()=>A)])]:[le("div",{class:"q-panel scroll",style:b.value,key:N.value,role:"tabpanel"},[A])]}function G(){if(p.length!==0)return u.animated===!0?[le(or,{name:D.value},ae)]:ae()}function ee(A){return p=mr(nt(A.default,[])).filter(z=>z.props!==null&&z.props.slot===void 0&&O(z.props.name)===!0),p.length}function te(){return p}return{panelIndex:E,panelDirectives:x,updatePanelsList:ee,updatePanelIndex:k,getPanelContent:G,getEnabledPanels:v,getPanels:te,isValidPanelName:O,keepAliveProps:M,needsUniqueKeepAliveWrapper:re,goToPanelByOffset:F,goToPanel:W,nextPanel:q,previousPanel:Z}}var zt=je({name:"QTabPanel",props:Pr,setup(u,{slots:c}){return()=>le("div",{class:"q-tab-panel"},nt(c.default))}}),Mr=je({name:"QTabPanels",props:Re(Re({},Nr),gr),emits:Lr,setup(u,{slots:c}){const w=tt(),T=pr(u,w.proxy.$q),{updatePanelsList:p,getPanelContent:s,panelDirectives:E}=kr(),D=ne(()=>"q-tab-panels q-panel-parent"+(T.value===!0?" q-tab-panels--dark q-dark":""));return()=>(p(c),ir("div",{class:D.value},s(),"pan",u.swipeable,()=>E.value))}}),Or=je({name:"QAvatar",props:ht(Re({},br),{fontSize:String,color:String,textColor:String,icon:String,square:Boolean,rounded:Boolean}),setup(u,{slots:c}){const w=_r(u),T=ne(()=>"q-avatar"+(u.color?` bg-${u.color}`:"")+(u.textColor?` text-${u.textColor} q-chip--colored`:"")+(u.square===!0?" q-avatar--square":u.rounded===!0?" rounded-borders":"")),p=ne(()=>u.fontSize?{fontSize:u.fontSize}:null);return()=>{const s=u.icon!==void 0?[le(Me,{name:u.icon})]:void 0;return le("div",{class:T.value,style:w.value},[le("div",{class:"q-avatar__content row flex-center overflow-hidden",style:p.value},lr(c.default,s))])}}}),pt={default:{src:`// \u4ECE Math \u5BF9\u8C61\u5F15\u5165\u7684\u51FD\u6570/\u5E38\u91CF\u3002
// \u5982\u679C\u8981\u4F7F\u7528\u66F4\u591A\u6570\u5B66\u51FD\u6570\uFF0C\u8BF7\u53C2\u89C1 https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Math
const { random } = Math
const { sin, cos, tan, asin, acos, atan, atan2, exp, log, sqrt, pow } = Math
const { abs, min, max, floor, ceil, round } = Math
const { E, PI, LN2, LN10, LOG2E, LOG10E, SQRT1_2, SQRT2 } = Math

// \u5728 MetaData \u53EF\u4EE5\u83B7\u53D6\u4E00\u4E9B\u5173\u4E8E\u5F53\u524D\u73AF\u5883\u7684\u4FE1\u606F
const { version, sample_rate, channel, duration } = MetaData

// \u5728\u8FD9\u91CC\u53EF\u4EE5\u8FDB\u884C\u521D\u59CB\u5316\u5DE5\u4F5C

/** \u586B\u5145\u51FD\u6570\uFF0C\u7528\u4E8E\u586B\u5145 AudioBuffer\u3002\u5FC5\u987B\u8FD4\u56DE [-1, 1] \u4E4B\u95F4\u7684\u6570\u5B57\uFF0C\u5426\u5219\u89C6\u4E3A 0 \u5904\u7406\u3002
 * @param {number} n \u4E3A AudioBuffer \u5F53\u524D\u7684\u7D22\u5F15\u3002
 * @param {number} channel \u5F53\u524D\u7684\u58F0\u9053\u3002\u6CE8\u610F\uFF0C\u58F0\u9053\u7D22\u5F15\u4ECE 0 \u5F00\u59CB\u3002
 */
function fill(n, channel){
  // \u793A\u4F8B\uFF1A\u751F\u6210\u767D\u566A\u97F3\u3002
  // \u6CE8\u610F\uFF0Crandom \u8FD4\u56DE [0, 1) \u4E4B\u95F4\u7684\u968F\u673A\u6570\u5B57\u3002
  return random() * 2 - 1
}
`,name:"\u9ED8\u8BA4\uFF08\u767D\u566A\u97F3\u793A\u4F8B\uFF09"},simple:{src:`const { random } = Math
function fill(n, channel){
  // \u793A\u4F8B\uFF1A\u751F\u6210\u767D\u566A\u97F3\u3002
  // \u6CE8\u610F\uFF0Crandom \u8FD4\u56DE [0, 1) \u4E4B\u95F4\u7684\u968F\u673A\u6570\u5B57\u3002
  return random() * 2 - 1
}
    `,name:"\u767D\u566A\u97F3\u793A\u4F8B\uFF08\u7B80\u5316\u7248\uFF09"},superposition_of_three_sin_waves:{src:`const { sin, cos, tan, asin, acos, atan, atan2, exp, log, sqrt, pow } = Math
const { abs, min, max, floor, ceil, round } = Math
const { E, PI, LN2, LN10, LOG2E, LOG10E, SQRT1_2, SQRT2 } = Math

const { version, sample_rate, channel, duration } = MetaData

const length = floor(sample_rate * duration)
const arr = new Float32Array(length)

/** \u5CF0\u503C\u5F52\u4E00\u5316 */
function peak_normalization(arr){
  let min = Infinity;
  let max = -Infinity;
  for(let i = 0; i < arr.length; i++){
    const value = arr[i]
    if(value > max) max = value
    if(value < min) min = value
  }
  for(let i = 0; i < arr.length; i++){
    arr[i] = (arr[i] - min) / (max - min) * 2 - 1
  }
}

/** \u91C7\u6837\u7D22\u5F15\u6362\u7B97\u4E3A\u79D2 */
function index_to_second(f){
  return f / sample_rate
}

/** \u5468\u671F\u4E3A1\u7684\u6B63\u5F26\u6CE2 */
function sin_osc(x){
  return sin(x * 2 * PI)
}

for(let i = 0; i < arr.length; i++){
  const second = index_to_second(i)
  // \u5C06\u9891\u7387\u4E3A 1200\u30012400 \u548C 4800 \u7684\u6B63\u5F26\u6CE2\u53E0\u52A0
  arr[i] = sin_osc(second * 1200) + sin_osc(second * 2400) + sin_osc(second * 4800)
}

// \u8BD5\u7740\u628A\u4E0B\u9762\u8FD9\u884C\u6CE8\u91CA\u6389\uFF0C\uFF08\u5982\u679C\u6CA1\u6709\u6CE8\u91CA\uFF0C\u90A3\u4E48 arr \u91CC\u9762\u5927\u4E8E1\u7684\u6570\u503C\u5C31\u4F1A\u88AB\u4E22\u5931\uFF0C\u4ECE\u800C\u4EA7\u751F\u5931\u771F\u6548\u679C\uFF09
peak_normalization(arr)

// \u586B\u5145\u51FD\u6570\uFF0C\u628A\u6570\u7EC4\u7684\u5143\u7D20\u590D\u5236\u51FA\u53BB
function fill(n, channel){
  // \u5DE6\u53F3\u58F0\u9053\u53CD\u76F8\u5904\u7406
  return channel === 0 ? arr[n] : -arr[n]
}
`,name:"\u4E09\u4E2A sin \u6CE2\u53E0\u52A0"}},Zt={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(u,c){(function(w){u.exports=w()})(function(){return function w(T,p,s){function E(x,R){if(!p[x]){if(!T[x]){var h=typeof Je=="function"&&Je;if(!R&&h)return h(x,!0);if(D)return D(x,!0);var b=new Error("Cannot find module '"+x+"'");throw b.code="MODULE_NOT_FOUND",b}var N=p[x]={exports:{}};T[x][0].call(N.exports,function(M){var re=T[x][1][M];return E(re||M)},N,N.exports,w,T,p,s)}return p[x].exports}for(var D=typeof Je=="function"&&Je,U=0;U<s.length;U++)E(s[U]);return E}({1:[function(w,T,p){(function(s){var E=s.MutationObserver||s.WebKitMutationObserver,D;if(E){var U=0,x=new E(M),R=s.document.createTextNode("");x.observe(R,{characterData:!0}),D=function(){R.data=U=++U%2}}else if(!s.setImmediate&&typeof s.MessageChannel!="undefined"){var h=new s.MessageChannel;h.port1.onmessage=M,D=function(){h.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?D=function(){var q=s.document.createElement("script");q.onreadystatechange=function(){M(),q.onreadystatechange=null,q.parentNode.removeChild(q),q=null},s.document.documentElement.appendChild(q)}:D=function(){setTimeout(M,0)};var b,N=[];function M(){b=!0;for(var q,Z,W=N.length;W;){for(Z=N,N=[],q=-1;++q<W;)Z[q]();W=N.length}b=!1}T.exports=re;function re(q){N.push(q)===1&&!b&&D()}}).call(this,typeof Xe!="undefined"?Xe:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],2:[function(w,T,p){var s=w(1);function E(){}var D={},U=["REJECTED"],x=["FULFILLED"],R=["PENDING"];T.exports=h;function h(v){if(typeof v!="function")throw new TypeError("resolver must be a function");this.state=R,this.queue=[],this.outcome=void 0,v!==E&&re(this,v)}h.prototype.catch=function(v){return this.then(null,v)},h.prototype.then=function(v,I){if(typeof v!="function"&&this.state===x||typeof I!="function"&&this.state===U)return this;var F=new this.constructor(E);if(this.state!==R){var k=this.state===x?v:I;N(F,k,this.outcome)}else this.queue.push(new b(F,v,I));return F};function b(v,I,F){this.promise=v,typeof I=="function"&&(this.onFulfilled=I,this.callFulfilled=this.otherCallFulfilled),typeof F=="function"&&(this.onRejected=F,this.callRejected=this.otherCallRejected)}b.prototype.callFulfilled=function(v){D.resolve(this.promise,v)},b.prototype.otherCallFulfilled=function(v){N(this.promise,this.onFulfilled,v)},b.prototype.callRejected=function(v){D.reject(this.promise,v)},b.prototype.otherCallRejected=function(v){N(this.promise,this.onRejected,v)};function N(v,I,F){s(function(){var k;try{k=I(F)}catch(ae){return D.reject(v,ae)}k===v?D.reject(v,new TypeError("Cannot resolve promise with itself")):D.resolve(v,k)})}D.resolve=function(v,I){var F=q(M,I);if(F.status==="error")return D.reject(v,F.value);var k=F.value;if(k)re(v,k);else{v.state=x,v.outcome=I;for(var ae=-1,G=v.queue.length;++ae<G;)v.queue[ae].callFulfilled(I)}return v},D.reject=function(v,I){v.state=U,v.outcome=I;for(var F=-1,k=v.queue.length;++F<k;)v.queue[F].callRejected(I);return v};function M(v){var I=v&&v.then;if(v&&(typeof v=="object"||typeof v=="function")&&typeof I=="function")return function(){I.apply(v,arguments)}}function re(v,I){var F=!1;function k(te){F||(F=!0,D.reject(v,te))}function ae(te){F||(F=!0,D.resolve(v,te))}function G(){I(ae,k)}var ee=q(G);ee.status==="error"&&k(ee.value)}function q(v,I){var F={};try{F.value=v(I),F.status="success"}catch(k){F.status="error",F.value=k}return F}h.resolve=Z;function Z(v){return v instanceof this?v:D.resolve(new this(E),v)}h.reject=W;function W(v){var I=new this(E);return D.reject(I,v)}h.all=O;function O(v){var I=this;if(Object.prototype.toString.call(v)!=="[object Array]")return this.reject(new TypeError("must be an array"));var F=v.length,k=!1;if(!F)return this.resolve([]);for(var ae=new Array(F),G=0,ee=-1,te=new this(E);++ee<F;)A(v[ee],ee);return te;function A(z,ce){I.resolve(z).then(ve,function(he){k||(k=!0,D.reject(te,he))});function ve(he){ae[ce]=he,++G===F&&!k&&(k=!0,D.resolve(te,ae))}}}h.race=j;function j(v){var I=this;if(Object.prototype.toString.call(v)!=="[object Array]")return this.reject(new TypeError("must be an array"));var F=v.length,k=!1;if(!F)return this.resolve([]);for(var ae=-1,G=new this(E);++ae<F;)ee(v[ae]);return G;function ee(te){I.resolve(te).then(function(A){k||(k=!0,D.resolve(G,A))},function(A){k||(k=!0,D.reject(G,A))})}}},{"1":1}],3:[function(w,T,p){(function(s){typeof s.Promise!="function"&&(s.Promise=w(2))}).call(this,typeof Xe!="undefined"?Xe:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"2":2}],4:[function(w,T,p){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function E(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function D(){try{if(typeof indexedDB!="undefined")return indexedDB;if(typeof webkitIndexedDB!="undefined")return webkitIndexedDB;if(typeof mozIndexedDB!="undefined")return mozIndexedDB;if(typeof OIndexedDB!="undefined")return OIndexedDB;if(typeof msIndexedDB!="undefined")return msIndexedDB}catch{return}}var U=D();function x(){try{if(!U||!U.open)return!1;var e=typeof openDatabase!="undefined"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),n=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!e||n)&&typeof indexedDB!="undefined"&&typeof IDBKeyRange!="undefined"}catch{return!1}}function R(e,n){e=e||[],n=n||{};try{return new Blob(e,n)}catch(r){if(r.name!=="TypeError")throw r;for(var t=typeof BlobBuilder!="undefined"?BlobBuilder:typeof MSBlobBuilder!="undefined"?MSBlobBuilder:typeof MozBlobBuilder!="undefined"?MozBlobBuilder:WebKitBlobBuilder,a=new t,o=0;o<e.length;o+=1)a.append(e[o]);return a.getBlob(n.type)}}typeof Promise=="undefined"&&w(3);var h=Promise;function b(e,n){n&&e.then(function(t){n(null,t)},function(t){n(t)})}function N(e,n,t){typeof n=="function"&&e.then(n),typeof t=="function"&&e.catch(t)}function M(e){return typeof e!="string"&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function re(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var q="local-forage-detect-blob-support",Z=void 0,W={},O=Object.prototype.toString,j="readonly",v="readwrite";function I(e){for(var n=e.length,t=new ArrayBuffer(n),a=new Uint8Array(t),o=0;o<n;o++)a[o]=e.charCodeAt(o);return t}function F(e){return new h(function(n){var t=e.transaction(q,v),a=R([""]);t.objectStore(q).put(a,"key"),t.onabort=function(o){o.preventDefault(),o.stopPropagation(),n(!1)},t.oncomplete=function(){var o=navigator.userAgent.match(/Chrome\/(\d+)/),r=navigator.userAgent.match(/Edge\//);n(r||!o||parseInt(o[1],10)>=43)}}).catch(function(){return!1})}function k(e){return typeof Z=="boolean"?h.resolve(Z):F(e).then(function(n){return Z=n,Z})}function ae(e){var n=W[e.name],t={};t.promise=new h(function(a,o){t.resolve=a,t.reject=o}),n.deferredOperations.push(t),n.dbReady?n.dbReady=n.dbReady.then(function(){return t.promise}):n.dbReady=t.promise}function G(e){var n=W[e.name],t=n.deferredOperations.pop();if(t)return t.resolve(),t.promise}function ee(e,n){var t=W[e.name],a=t.deferredOperations.pop();if(a)return a.reject(n),a.promise}function te(e,n){return new h(function(t,a){if(W[e.name]=W[e.name]||_(),e.db)if(n)ae(e),e.db.close();else return t(e.db);var o=[e.name];n&&o.push(e.version);var r=U.open.apply(U,o);n&&(r.onupgradeneeded=function(i){var l=r.result;try{l.createObjectStore(e.storeName),i.oldVersion<=1&&l.createObjectStore(q)}catch(f){if(f.name==="ConstraintError")console.warn('The database "'+e.name+'" has been upgraded from version '+i.oldVersion+" to version "+i.newVersion+', but the storage "'+e.storeName+'" already exists.');else throw f}}),r.onerror=function(i){i.preventDefault(),a(r.error)},r.onsuccess=function(){var i=r.result;i.onversionchange=function(l){l.target.close()},t(i),G(e)}})}function A(e){return te(e,!1)}function z(e){return te(e,!0)}function ce(e,n){if(!e.db)return!0;var t=!e.db.objectStoreNames.contains(e.storeName),a=e.version<e.db.version,o=e.version>e.db.version;if(a&&(e.version!==n&&console.warn('The database "'+e.name+`" can't be downgraded from version `+e.db.version+" to version "+e.version+"."),e.version=e.db.version),o||t){if(t){var r=e.db.version+1;r>e.version&&(e.version=r)}return!0}return!1}function ve(e){return new h(function(n,t){var a=new FileReader;a.onerror=t,a.onloadend=function(o){var r=btoa(o.target.result||"");n({__local_forage_encoded_blob:!0,data:r,type:e.type})},a.readAsBinaryString(e)})}function he(e){var n=I(atob(e.data));return R([n],{type:e.type})}function Fe(e){return e&&e.__local_forage_encoded_blob}function me(e){var n=this,t=n._initReady().then(function(){var a=W[n._dbInfo.name];if(a&&a.dbReady)return a.dbReady});return N(t,e,e),t}function Ce(e){ae(e);for(var n=W[e.name],t=n.forages,a=0;a<t.length;a++){var o=t[a];o._dbInfo.db&&(o._dbInfo.db.close(),o._dbInfo.db=null)}return e.db=null,A(e).then(function(r){return e.db=r,ce(e)?z(e):r}).then(function(r){e.db=n.db=r;for(var i=0;i<t.length;i++)t[i]._dbInfo.db=r}).catch(function(r){throw ee(e,r),r})}function y(e,n,t,a){a===void 0&&(a=1);try{var o=e.db.transaction(e.storeName,n);t(null,o)}catch(r){if(a>0&&(!e.db||r.name==="InvalidStateError"||r.name==="NotFoundError"))return h.resolve().then(function(){if(!e.db||r.name==="NotFoundError"&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),z(e)}).then(function(){return Ce(e).then(function(){y(e,n,t,a-1)})}).catch(t);t(r)}}function _(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function S(e){var n=this,t={db:null};if(e)for(var a in e)t[a]=e[a];var o=W[t.name];o||(o=_(),W[t.name]=o),o.forages.push(n),n._initReady||(n._initReady=n.ready,n.ready=me);var r=[];function i(){return h.resolve()}for(var l=0;l<o.forages.length;l++){var f=o.forages[l];f!==n&&r.push(f._initReady().catch(i))}var d=o.forages.slice(0);return h.all(r).then(function(){return t.db=o.db,A(t)}).then(function(m){return t.db=m,ce(t,n._defaultConfig.version)?z(t):m}).then(function(m){t.db=o.db=m,n._dbInfo=t;for(var C=0;C<d.length;C++){var L=d[C];L!==n&&(L._dbInfo.db=t.db,L._dbInfo.version=t.version)}})}function fe(e,n){var t=this;e=M(e);var a=new h(function(o,r){t.ready().then(function(){y(t._dbInfo,j,function(i,l){if(i)return r(i);try{var f=l.objectStore(t._dbInfo.storeName),d=f.get(e);d.onsuccess=function(){var m=d.result;m===void 0&&(m=null),Fe(m)&&(m=he(m)),o(m)},d.onerror=function(){r(d.error)}}catch(m){r(m)}})}).catch(r)});return b(a,n),a}function Se(e,n){var t=this,a=new h(function(o,r){t.ready().then(function(){y(t._dbInfo,j,function(i,l){if(i)return r(i);try{var f=l.objectStore(t._dbInfo.storeName),d=f.openCursor(),m=1;d.onsuccess=function(){var C=d.result;if(C){var L=C.value;Fe(L)&&(L=he(L));var Y=e(L,C.key,m++);Y!==void 0?o(Y):C.continue()}else o()},d.onerror=function(){r(d.error)}}catch(C){r(C)}})}).catch(r)});return b(a,n),a}function Oe(e,n,t){var a=this;e=M(e);var o=new h(function(r,i){var l;a.ready().then(function(){return l=a._dbInfo,O.call(n)==="[object Blob]"?k(l.db).then(function(f){return f?n:ve(n)}):n}).then(function(f){y(a._dbInfo,v,function(d,m){if(d)return i(d);try{var C=m.objectStore(a._dbInfo.storeName);f===null&&(f=void 0);var L=C.put(f,e);m.oncomplete=function(){f===void 0&&(f=null),r(f)},m.onabort=m.onerror=function(){var Y=L.error?L.error:L.transaction.error;i(Y)}}catch(Y){i(Y)}})}).catch(i)});return b(o,t),o}function xe(e,n){var t=this;e=M(e);var a=new h(function(o,r){t.ready().then(function(){y(t._dbInfo,v,function(i,l){if(i)return r(i);try{var f=l.objectStore(t._dbInfo.storeName),d=f.delete(e);l.oncomplete=function(){o()},l.onerror=function(){r(d.error)},l.onabort=function(){var m=d.error?d.error:d.transaction.error;r(m)}}catch(m){r(m)}})}).catch(r)});return b(a,n),a}function ye(e){var n=this,t=new h(function(a,o){n.ready().then(function(){y(n._dbInfo,v,function(r,i){if(r)return o(r);try{var l=i.objectStore(n._dbInfo.storeName),f=l.clear();i.oncomplete=function(){a()},i.onabort=i.onerror=function(){var d=f.error?f.error:f.transaction.error;o(d)}}catch(d){o(d)}})}).catch(o)});return b(t,e),t}function rt(e){var n=this,t=new h(function(a,o){n.ready().then(function(){y(n._dbInfo,j,function(r,i){if(r)return o(r);try{var l=i.objectStore(n._dbInfo.storeName),f=l.count();f.onsuccess=function(){a(f.result)},f.onerror=function(){o(f.error)}}catch(d){o(d)}})}).catch(o)});return b(t,e),t}function at(e,n){var t=this,a=new h(function(o,r){if(e<0){o(null);return}t.ready().then(function(){y(t._dbInfo,j,function(i,l){if(i)return r(i);try{var f=l.objectStore(t._dbInfo.storeName),d=!1,m=f.openKeyCursor();m.onsuccess=function(){var C=m.result;if(!C){o(null);return}e===0||d?o(C.key):(d=!0,C.advance(e))},m.onerror=function(){r(m.error)}}catch(C){r(C)}})}).catch(r)});return b(a,n),a}function ot(e){var n=this,t=new h(function(a,o){n.ready().then(function(){y(n._dbInfo,j,function(r,i){if(r)return o(r);try{var l=i.objectStore(n._dbInfo.storeName),f=l.openKeyCursor(),d=[];f.onsuccess=function(){var m=f.result;if(!m){a(d);return}d.push(m.key),m.continue()},f.onerror=function(){o(f.error)}}catch(m){o(m)}})}).catch(o)});return b(t,e),t}function Ae(e,n){n=re.apply(this,arguments);var t=this.config();e=typeof e!="function"&&e||{},e.name||(e.name=e.name||t.name,e.storeName=e.storeName||t.storeName);var a=this,o;if(!e.name)o=h.reject("Invalid arguments");else{var r=e.name===t.name&&a._dbInfo.db,i=r?h.resolve(a._dbInfo.db):A(e).then(function(l){var f=W[e.name],d=f.forages;f.db=l;for(var m=0;m<d.length;m++)d[m]._dbInfo.db=l;return l});e.storeName?o=i.then(function(l){if(!!l.objectStoreNames.contains(e.storeName)){var f=l.version+1;ae(e);var d=W[e.name],m=d.forages;l.close();for(var C=0;C<m.length;C++){var L=m[C];L._dbInfo.db=null,L._dbInfo.version=f}var Y=new h(function(K,de){var se=U.open(e.name,f);se.onerror=function(pe){var Ve=se.result;Ve.close(),de(pe)},se.onupgradeneeded=function(){var pe=se.result;pe.deleteObjectStore(e.storeName)},se.onsuccess=function(){var pe=se.result;pe.close(),K(pe)}});return Y.then(function(K){d.db=K;for(var de=0;de<m.length;de++){var se=m[de];se._dbInfo.db=K,G(se._dbInfo)}}).catch(function(K){throw(ee(e,K)||h.resolve()).catch(function(){}),K})}}):o=i.then(function(l){ae(e);var f=W[e.name],d=f.forages;l.close();for(var m=0;m<d.length;m++){var C=d[m];C._dbInfo.db=null}var L=new h(function(Y,K){var de=U.deleteDatabase(e.name);de.onerror=function(){var se=de.result;se&&se.close(),K(de.error)},de.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},de.onsuccess=function(){var se=de.result;se&&se.close(),Y(se)}});return L.then(function(Y){f.db=Y;for(var K=0;K<d.length;K++){var de=d[K];G(de._dbInfo)}}).catch(function(Y){throw(ee(e,Y)||h.resolve()).catch(function(){}),Y})})}return b(o,n),o}var ut={_driver:"asyncStorage",_initStorage:S,_support:x(),iterate:Se,getItem:fe,setItem:Oe,removeItem:xe,clear:ye,length:rt,key:at,keys:ot,dropInstance:Ae};function it(){return typeof openDatabase=="function"}var be="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ye="~~local_forage_type~",g=/^~~local_forage_type~([^~]+)~/,P="__lfsc__:",V=P.length,X="arbf",oe="blob",Q="si08",ue="ui08",J="uic8",ge="si16",De="si32",Ie="ur16",Be="ui32",qe="fl32",Et="fl64",Ct=V+X.length,St=Object.prototype.toString;function Ft(e){var n=e.length*.75,t=e.length,a,o=0,r,i,l,f;e[e.length-1]==="="&&(n--,e[e.length-2]==="="&&n--);var d=new ArrayBuffer(n),m=new Uint8Array(d);for(a=0;a<t;a+=4)r=be.indexOf(e[a]),i=be.indexOf(e[a+1]),l=be.indexOf(e[a+2]),f=be.indexOf(e[a+3]),m[o++]=r<<2|i>>4,m[o++]=(i&15)<<4|l>>2,m[o++]=(l&3)<<6|f&63;return d}function lt(e){var n=new Uint8Array(e),t="",a;for(a=0;a<n.length;a+=3)t+=be[n[a]>>2],t+=be[(n[a]&3)<<4|n[a+1]>>4],t+=be[(n[a+1]&15)<<2|n[a+2]>>6],t+=be[n[a+2]&63];return n.length%3===2?t=t.substring(0,t.length-1)+"=":n.length%3===1&&(t=t.substring(0,t.length-2)+"=="),t}function en(e,n){var t="";if(e&&(t=St.call(e)),e&&(t==="[object ArrayBuffer]"||e.buffer&&St.call(e.buffer)==="[object ArrayBuffer]")){var a,o=P;e instanceof ArrayBuffer?(a=e,o+=X):(a=e.buffer,t==="[object Int8Array]"?o+=Q:t==="[object Uint8Array]"?o+=ue:t==="[object Uint8ClampedArray]"?o+=J:t==="[object Int16Array]"?o+=ge:t==="[object Uint16Array]"?o+=Ie:t==="[object Int32Array]"?o+=De:t==="[object Uint32Array]"?o+=Be:t==="[object Float32Array]"?o+=qe:t==="[object Float64Array]"?o+=Et:n(new Error("Failed to get type for BinaryArray"))),n(o+lt(a))}else if(t==="[object Blob]"){var r=new FileReader;r.onload=function(){var i=Ye+e.type+"~"+lt(this.result);n(P+oe+i)},r.readAsArrayBuffer(e)}else try{n(JSON.stringify(e))}catch(i){console.error("Couldn't convert value into a JSON string: ",e),n(null,i)}}function tn(e){if(e.substring(0,V)!==P)return JSON.parse(e);var n=e.substring(Ct),t=e.substring(V,Ct),a;if(t===oe&&g.test(n)){var o=n.match(g);a=o[1],n=n.substring(o[0].length)}var r=Ft(n);switch(t){case X:return r;case oe:return R([r],{type:a});case Q:return new Int8Array(r);case ue:return new Uint8Array(r);case J:return new Uint8ClampedArray(r);case ge:return new Int16Array(r);case Ie:return new Uint16Array(r);case De:return new Int32Array(r);case Be:return new Uint32Array(r);case qe:return new Float32Array(r);case Et:return new Float64Array(r);default:throw new Error("Unkown type: "+t)}}var st={serialize:en,deserialize:tn,stringToBuffer:Ft,bufferToString:lt};function xt(e,n,t,a){e.executeSql("CREATE TABLE IF NOT EXISTS "+n.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],t,a)}function nn(e){var n=this,t={db:null};if(e)for(var a in e)t[a]=typeof e[a]!="string"?e[a].toString():e[a];var o=new h(function(r,i){try{t.db=openDatabase(t.name,String(t.version),t.description,t.size)}catch(l){return i(l)}t.db.transaction(function(l){xt(l,t,function(){n._dbInfo=t,r()},function(f,d){i(d)})},i)});return t.serializer=st,o}function Ee(e,n,t,a,o,r){e.executeSql(t,a,o,function(i,l){l.code===l.SYNTAX_ERR?i.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[n.storeName],function(f,d){d.rows.length?r(f,l):xt(f,n,function(){f.executeSql(t,a,o,r)},r)},r):r(i,l)},r)}function rn(e,n){var t=this;e=M(e);var a=new h(function(o,r){t.ready().then(function(){var i=t._dbInfo;i.db.transaction(function(l){Ee(l,i,"SELECT * FROM "+i.storeName+" WHERE key = ? LIMIT 1",[e],function(f,d){var m=d.rows.length?d.rows.item(0).value:null;m&&(m=i.serializer.deserialize(m)),o(m)},function(f,d){r(d)})})}).catch(r)});return b(a,n),a}function an(e,n){var t=this,a=new h(function(o,r){t.ready().then(function(){var i=t._dbInfo;i.db.transaction(function(l){Ee(l,i,"SELECT * FROM "+i.storeName,[],function(f,d){for(var m=d.rows,C=m.length,L=0;L<C;L++){var Y=m.item(L),K=Y.value;if(K&&(K=i.serializer.deserialize(K)),K=e(K,Y.key,L+1),K!==void 0){o(K);return}}o()},function(f,d){r(d)})})}).catch(r)});return b(a,n),a}function At(e,n,t,a){var o=this;e=M(e);var r=new h(function(i,l){o.ready().then(function(){n===void 0&&(n=null);var f=n,d=o._dbInfo;d.serializer.serialize(n,function(m,C){C?l(C):d.db.transaction(function(L){Ee(L,d,"INSERT OR REPLACE INTO "+d.storeName+" (key, value) VALUES (?, ?)",[e,m],function(){i(f)},function(Y,K){l(K)})},function(L){if(L.code===L.QUOTA_ERR){if(a>0){i(At.apply(o,[e,f,t,a-1]));return}l(L)}})})}).catch(l)});return b(r,t),r}function on(e,n,t){return At.apply(this,[e,n,t,1])}function un(e,n){var t=this;e=M(e);var a=new h(function(o,r){t.ready().then(function(){var i=t._dbInfo;i.db.transaction(function(l){Ee(l,i,"DELETE FROM "+i.storeName+" WHERE key = ?",[e],function(){o()},function(f,d){r(d)})})}).catch(r)});return b(a,n),a}function ln(e){var n=this,t=new h(function(a,o){n.ready().then(function(){var r=n._dbInfo;r.db.transaction(function(i){Ee(i,r,"DELETE FROM "+r.storeName,[],function(){a()},function(l,f){o(f)})})}).catch(o)});return b(t,e),t}function sn(e){var n=this,t=new h(function(a,o){n.ready().then(function(){var r=n._dbInfo;r.db.transaction(function(i){Ee(i,r,"SELECT COUNT(key) as c FROM "+r.storeName,[],function(l,f){var d=f.rows.item(0).c;a(d)},function(l,f){o(f)})})}).catch(o)});return b(t,e),t}function cn(e,n){var t=this,a=new h(function(o,r){t.ready().then(function(){var i=t._dbInfo;i.db.transaction(function(l){Ee(l,i,"SELECT key FROM "+i.storeName+" WHERE id = ? LIMIT 1",[e+1],function(f,d){var m=d.rows.length?d.rows.item(0).key:null;o(m)},function(f,d){r(d)})})}).catch(r)});return b(a,n),a}function fn(e){var n=this,t=new h(function(a,o){n.ready().then(function(){var r=n._dbInfo;r.db.transaction(function(i){Ee(i,r,"SELECT key FROM "+r.storeName,[],function(l,f){for(var d=[],m=0;m<f.rows.length;m++)d.push(f.rows.item(m).key);a(d)},function(l,f){o(f)})})}).catch(o)});return b(t,e),t}function dn(e){return new h(function(n,t){e.transaction(function(a){a.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(o,r){for(var i=[],l=0;l<r.rows.length;l++)i.push(r.rows.item(l).name);n({db:e,storeNames:i})},function(o,r){t(r)})},function(a){t(a)})})}function vn(e,n){n=re.apply(this,arguments);var t=this.config();e=typeof e!="function"&&e||{},e.name||(e.name=e.name||t.name,e.storeName=e.storeName||t.storeName);var a=this,o;return e.name?o=new h(function(r){var i;e.name===t.name?i=a._dbInfo.db:i=openDatabase(e.name,"","",0),e.storeName?r({db:i,storeNames:[e.storeName]}):r(dn(i))}).then(function(r){return new h(function(i,l){r.db.transaction(function(f){function d(Y){return new h(function(K,de){f.executeSql("DROP TABLE IF EXISTS "+Y,[],function(){K()},function(se,pe){de(pe)})})}for(var m=[],C=0,L=r.storeNames.length;C<L;C++)m.push(d(r.storeNames[C]));h.all(m).then(function(){i()}).catch(function(Y){l(Y)})},function(f){l(f)})})}):o=h.reject("Invalid arguments"),b(o,n),o}var hn={_driver:"webSQLStorage",_initStorage:nn,_support:it(),iterate:an,getItem:rn,setItem:on,removeItem:un,clear:ln,length:sn,key:cn,keys:fn,dropInstance:vn};function mn(){try{return typeof localStorage!="undefined"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function Dt(e,n){var t=e.name+"/";return e.storeName!==n.storeName&&(t+=e.storeName+"/"),t}function gn(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch{return!0}}function pn(){return!gn()||localStorage.length>0}function bn(e){var n=this,t={};if(e)for(var a in e)t[a]=e[a];return t.keyPrefix=Dt(e,n._defaultConfig),pn()?(n._dbInfo=t,t.serializer=st,h.resolve()):h.reject()}function _n(e){var n=this,t=n.ready().then(function(){for(var a=n._dbInfo.keyPrefix,o=localStorage.length-1;o>=0;o--){var r=localStorage.key(o);r.indexOf(a)===0&&localStorage.removeItem(r)}});return b(t,e),t}function yn(e,n){var t=this;e=M(e);var a=t.ready().then(function(){var o=t._dbInfo,r=localStorage.getItem(o.keyPrefix+e);return r&&(r=o.serializer.deserialize(r)),r});return b(a,n),a}function wn(e,n){var t=this,a=t.ready().then(function(){for(var o=t._dbInfo,r=o.keyPrefix,i=r.length,l=localStorage.length,f=1,d=0;d<l;d++){var m=localStorage.key(d);if(m.indexOf(r)===0){var C=localStorage.getItem(m);if(C&&(C=o.serializer.deserialize(C)),C=e(C,m.substring(i),f++),C!==void 0)return C}}});return b(a,n),a}function En(e,n){var t=this,a=t.ready().then(function(){var o=t._dbInfo,r;try{r=localStorage.key(e)}catch{r=null}return r&&(r=r.substring(o.keyPrefix.length)),r});return b(a,n),a}function Cn(e){var n=this,t=n.ready().then(function(){for(var a=n._dbInfo,o=localStorage.length,r=[],i=0;i<o;i++){var l=localStorage.key(i);l.indexOf(a.keyPrefix)===0&&r.push(l.substring(a.keyPrefix.length))}return r});return b(t,e),t}function Sn(e){var n=this,t=n.keys().then(function(a){return a.length});return b(t,e),t}function Fn(e,n){var t=this;e=M(e);var a=t.ready().then(function(){var o=t._dbInfo;localStorage.removeItem(o.keyPrefix+e)});return b(a,n),a}function xn(e,n,t){var a=this;e=M(e);var o=a.ready().then(function(){n===void 0&&(n=null);var r=n;return new h(function(i,l){var f=a._dbInfo;f.serializer.serialize(n,function(d,m){if(m)l(m);else try{localStorage.setItem(f.keyPrefix+e,d),i(r)}catch(C){(C.name==="QuotaExceededError"||C.name==="NS_ERROR_DOM_QUOTA_REACHED")&&l(C),l(C)}})})});return b(o,t),o}function An(e,n){if(n=re.apply(this,arguments),e=typeof e!="function"&&e||{},!e.name){var t=this.config();e.name=e.name||t.name,e.storeName=e.storeName||t.storeName}var a=this,o;return e.name?o=new h(function(r){e.storeName?r(Dt(e,a._defaultConfig)):r(e.name+"/")}).then(function(r){for(var i=localStorage.length-1;i>=0;i--){var l=localStorage.key(i);l.indexOf(r)===0&&localStorage.removeItem(l)}}):o=h.reject("Invalid arguments"),b(o,n),o}var Dn={_driver:"localStorageWrapper",_initStorage:bn,_support:mn(),iterate:wn,getItem:yn,setItem:xn,removeItem:Fn,clear:_n,length:Sn,key:En,keys:Cn,dropInstance:An},In=function(n,t){return n===t||typeof n=="number"&&typeof t=="number"&&isNaN(n)&&isNaN(t)},Bn=function(n,t){for(var a=n.length,o=0;o<a;){if(In(n[o],t))return!0;o++}return!1},It=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"},$e={},Bt={},Te={INDEXEDDB:ut,WEBSQL:hn,LOCALSTORAGE:Dn},Tn=[Te.INDEXEDDB._driver,Te.WEBSQL._driver,Te.LOCALSTORAGE._driver],Ke=["dropInstance"],ct=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Ke),Rn={description:"",driver:Tn.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Pn(e,n){e[n]=function(){var t=arguments;return e.ready().then(function(){return e[n].apply(e,t)})}}function ft(){for(var e=1;e<arguments.length;e++){var n=arguments[e];if(n)for(var t in n)n.hasOwnProperty(t)&&(It(n[t])?arguments[0][t]=n[t].slice():arguments[0][t]=n[t])}return arguments[0]}var Nn=function(){function e(n){E(this,e);for(var t in Te)if(Te.hasOwnProperty(t)){var a=Te[t],o=a._driver;this[t]=o,$e[o]||this.defineDriver(a)}this._defaultConfig=ft({},Rn),this._config=ft({},this._defaultConfig,n),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return e.prototype.config=function(t){if((typeof t=="undefined"?"undefined":s(t))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var a in t){if(a==="storeName"&&(t[a]=t[a].replace(/\W/g,"_")),a==="version"&&typeof t[a]!="number")return new Error("Database version must be a number.");this._config[a]=t[a]}return"driver"in t&&t.driver?this.setDriver(this._config.driver):!0}else return typeof t=="string"?this._config[t]:this._config},e.prototype.defineDriver=function(t,a,o){var r=new h(function(i,l){try{var f=t._driver,d=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!t._driver){l(d);return}for(var m=ct.concat("_initStorage"),C=0,L=m.length;C<L;C++){var Y=m[C],K=!Bn(Ke,Y);if((K||t[Y])&&typeof t[Y]!="function"){l(d);return}}var de=function(){for(var Ve=function(Mn){return function(){var On=new Error("Method "+Mn+" is not implemented by the current driver"),Tt=h.reject(On);return b(Tt,arguments[arguments.length-1]),Tt}},dt=0,kn=Ke.length;dt<kn;dt++){var vt=Ke[dt];t[vt]||(t[vt]=Ve(vt))}};de();var se=function(Ve){$e[f]&&console.info("Redefining LocalForage driver: "+f),$e[f]=t,Bt[f]=Ve,i()};"_support"in t?t._support&&typeof t._support=="function"?t._support().then(se,l):se(!!t._support):se(!0)}catch(pe){l(pe)}});return N(r,a,o),r},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(t,a,o){var r=$e[t]?h.resolve($e[t]):h.reject(new Error("Driver not found."));return N(r,a,o),r},e.prototype.getSerializer=function(t){var a=h.resolve(st);return N(a,t),a},e.prototype.ready=function(t){var a=this,o=a._driverSet.then(function(){return a._ready===null&&(a._ready=a._initDriver()),a._ready});return N(o,t,t),o},e.prototype.setDriver=function(t,a,o){var r=this;It(t)||(t=[t]);var i=this._getSupportedDrivers(t);function l(){r._config.driver=r.driver()}function f(C){return r._extend(C),l(),r._ready=r._initStorage(r._config),r._ready}function d(C){return function(){var L=0;function Y(){for(;L<C.length;){var K=C[L];return L++,r._dbInfo=null,r._ready=null,r.getDriver(K).then(f).catch(Y)}l();var de=new Error("No available storage method found.");return r._driverSet=h.reject(de),r._driverSet}return Y()}}var m=this._driverSet!==null?this._driverSet.catch(function(){return h.resolve()}):h.resolve();return this._driverSet=m.then(function(){var C=i[0];return r._dbInfo=null,r._ready=null,r.getDriver(C).then(function(L){r._driver=L._driver,l(),r._wrapLibraryMethodsWithReady(),r._initDriver=d(i)})}).catch(function(){l();var C=new Error("No available storage method found.");return r._driverSet=h.reject(C),r._driverSet}),N(this._driverSet,a,o),this._driverSet},e.prototype.supports=function(t){return!!Bt[t]},e.prototype._extend=function(t){ft(this,t)},e.prototype._getSupportedDrivers=function(t){for(var a=[],o=0,r=t.length;o<r;o++){var i=t[o];this.supports(i)&&a.push(i)}return a},e.prototype._wrapLibraryMethodsWithReady=function(){for(var t=0,a=ct.length;t<a;t++)Pn(this,ct[t])},e.prototype.createInstance=function(t){return new e(t)},e}(),Ln=new Nn;T.exports=Ln},{"3":3}]},{},[4])(4)})})(Zt);var Qt=Zt.exports;const qr={class:"col-10 row",style:{height:"max-content"}},$r={class:"col-12 row items-center"},Vr={class:"code"},Ur=Yt({name:"FnSoundFileList",props:{list:null},emits:["item_click"],setup(u,{emit:c}){return(w,T)=>(we(),ke(Jt,{class:"col-grow",separator:""},{default:$(()=>[(we(!0),_t(Gt,null,Kt(u.list,p=>(we(),ke(Xt,{class:"q-px-md q-pb-md",clickable:"",onClick:s=>{var E;return w.$emit("item_click",(E=p.id)!=null?E:p.name)}},{default:$(()=>[B(Ht,{class:"row"},{default:$(()=>[ie("div",qr,[ie("div",$r,[B(et,{class:"col"},{default:$(()=>[yt(We(p.name),1)]),_:2},1024),sr(w.$slots,"after_title")]),B(et,{class:"col-12 text-grey-6",caption:""},{default:$(()=>[ie("code",null,[ie("pre",Vr,We(p.src),1)])]),_:2},1024)])]),_:2},1024)]),_:2},1032,["onClick"]))),256))]),_:3}))}});const zr={class:"col-12 row bg-deep-purple-10 q-pa-md q-gutter-sm items-center"},Qr={class:"col-12 row"},Wr={class:"col-8 row"},jr={class:"col-12 row text-grey-4 q-pa-sm q-gutter-x-sm",style:{"background-color":"rgb(30, 30, 30)"}},Yr={class:"col row justify-center items-start bg-grey-10 q-pa-md"},Kr=["src"],Gr=ie("div",{class:"text-body col text-red-7"},"\u8FD0\u884C\u9519\u8BEF",-1),Hr={class:"col-12"},Xr={class:"text-body1 code"},Jr=ie("div",{class:"text-h6"},"\u9009\u62E9\u7F13\u5B58\u6587\u4EF6",-1),Zr={class:"col-10 row",style:{height:"max-content"}},ea={class:"col-12 row items-center"},ta={class:"code"},na={key:1,class:"col-grow row text-center items-center bg-grey-9",style:{"min-height":"4rem"}},ra=ie("div",{class:"col"},"\u7A7A",-1),aa=[ra],oa=ie("div",{class:"col-grow row text-center items-center bg-grey-9",style:{"min-height":"4rem"}},[ie("div",{class:"col"},"\u5F00\u53D1\u4E2D...")],-1),ua=ie("div",{class:"text-h6"},"\u4FDD\u5B58",-1),ia=ie("div",{class:"text-h6"},"\u6587\u4EF6\u5DF2\u5B58\u5728\uFF0C\u662F\u5426\u8986\u76D6\uFF1F",-1),la=yt("\u8BE5\u529F\u80FD\u5F00\u53D1\u4E2D..."),ya=Yt({name:"fn_sound",setup(u){const c=Qt.createInstance({name:"fn_sound",driver:Qt.INDEXEDDB}),w=H(0),T=H([]),p=H(void 0),s=H(""),E=H(void 0),D=`
onmessage = (e) => {
  const data = e.data
  if(data.type === "render") {
    const { code, sample_rate, channel_count, duration } = data
    const length = Math.floor(sample_rate * duration)
    console.log("rendering", length)
    try{
      const filler = Function(code)()
      const result = []
      for (let i = 0; i < channel_count; i++) {
        const buf = new Float32Array(length)
        for (let j = 0; j < length; j++) {
          if (j % sample_rate === 0) {
            postMessage({ name: "progress", value: (i * length + j) / (channel_count * length) })
          }
          buf[j] = filler(j, i)
        }
        result.push(buf)
      }
      postMessage({ type: "render_finish", result })
    } catch(e) {
      postMessage({ type: "render_error", err_info: String(e) })
    }
  }
};
`,U=new Worker(URL.createObjectURL(new Blob([D])));U.addEventListener("message",y=>{const _=y.data;if(_.type==="progress")w.value=_.value,me.value="";else if(_.type==="render_finish"){me.value="",w.value=1;const S=_.result;T.value=S,console.log(S);const fe=Math.floor(x.sample_rate*x.duration),Se=R.createBuffer(x.channel_count,fe,x.sample_rate);for(let ye=0;ye<x.channel_count;ye++)Se.copyToChannel(S[ye],ye);p.value=Se;const Oe=Wn(Se),xe=new Blob([Oe],{type:"audio/wav"});s.value=URL.createObjectURL(xe)}else _.type==="render_error"&&(w.value=1,console.error(_.err_info),me.value=_.err_info)});const x=cr({sample_rate:44100,channel_count:2,duration:4,version:"0.0.1"}),R=new AudioContext({sampleRate:x.sample_rate}),h=H(pt.default.src);function b(y){return y.slice(0,40).replace(/^\n/,"")+"..."}function N(y){y.text().then(_=>{E.value.change_code(_)}).catch(_=>{console.error(_)})}function M(y){y.preventDefault(),y.stopPropagation(),y.dataTransfer.effectAllowed="copy"}function re(y){y.preventDefault(),y.stopPropagation()}function q(y){y.preventDefault(),y.stopPropagation();let _=y.dataTransfer.files[0];N(_)}function Z(){const y=`const MetaData = {
    sample_rate: ${x.sample_rate},
    channel_count: ${x.channel_count},
    duration: ${x.duration},
    version: "${x.version}",
  }
  `+h.value+`
  return fill`;U.postMessage({type:"render",code:y,sample_rate:x.sample_rate,channel_count:x.channel_count,duration:x.duration})}function W(){const y=document.createElement("input");y.setAttribute("type","file"),y.click(),y.onchange=_=>{N(y.files[0])}}const O=H(!1),j=H([]);function v(){I(),O.value=!0}function I(){c.keys().then(y=>{j.value=Array(y.length).fill("");for(let _=0;_<y.length;_++){const S=y[_];c.getItem(S).then(fe=>{j.value[_]={name:S,src:fe.slice(0,40).replace(/^\n/,"")+"..."}})}})}function F(y){G.value=y.name.slice(0,-3),c.getItem(y.name).then(_=>{var S;(S=E.value)==null||S.change_code(_)})}const k=H("cache");function ae(y,_){_.stopPropagation(),confirm("\u662F\u5426\u5220\u9664\u8BE5\u6587\u4EF6")&&c.removeItem(y).then(()=>{I()})}const G=H("\u672A\u547D\u540D"),ee=H(!1),te=H(!1);function A(){const y=new Blob([h.value],{type:"text/javascript"}),_=URL.createObjectURL(y),S=document.createElement("a");S.href=_,G.value.length===0&&(G.value="\u672A\u547D\u540D"),S.download=G.value+".js",S.click(),ee.value=!1}function z(){G.value.length===0&&(G.value="\u672A\u547D\u540D");const y=G.value+".js";c.getItem(y).then(_=>{_?te.value=!0:ve()}).catch(()=>{ve()})}function ce(){ve()}function ve(){const y=G.value+".js";c.setItem(y,h.value),te.value=!1,ee.value=!1}const he=H(!1);function Fe(){he.value=!0}const me=H(""),Ce=H(!1);return addEventListener("keydown",y=>{y.key==="s"&&y.ctrlKey?(y.preventDefault(),ee.value?A():ee.value=!0):y.key==="o"&&y.ctrlKey?(y.preventDefault(),W()):y.key==="q"&&y.ctrlKey?(y.preventDefault(),v()):y.key==="r"&&y.ctrlKey&&(y.preventDefault(),Z())},!0),(y,_)=>(we(),ke(yr,{class:"row",onDragenter:M,onDragover:re,onDrop:q},{default:$(()=>[ie("div",zr,[B(_e,{label:"\u751F\u6210",color:"blue-7",icon:"mdi-play",onClick:Z}),B(Ge,{label:"\u91C7\u6837\u7387",modelValue:x.sample_rate,"onUpdate:modelValue":_[0]||(_[0]=S=>x.sample_rate=S),standout:"","label-color":"blue-5","input-class":"text-white"},null,8,["modelValue"]),B(Ge,{label:"\u58F0\u9053\u6570",modelValue:x.channel_count,"onUpdate:modelValue":_[1]||(_[1]=S=>x.channel_count=S),standout:"","label-color":"blue-5","input-class":"text-white"},null,8,["modelValue"]),B(Ge,{label:"\u65F6\u957F\uFF08\u79D2\uFF09",modelValue:x.duration,"onUpdate:modelValue":_[2]||(_[2]=S=>x.duration=S),standout:"","label-color":"blue-5","input-class":"text-white"},null,8,["modelValue"]),B(jn,{value:w.value,"animation-speed":100,color:me.value.length>0?"negative":w.value!==1?"blue-5":"positive",style:{height:"4px"},"track-color":"white"},null,8,["value","color"])]),ie("div",Qr,[ie("div",Wr,[ie("div",jr,[B(_e,{class:"col-shirk",label:"\u9009\u62E9\u6587\u4EF6",color:"deep-purple-10",onClick:W}),B(_e,{class:"col-shirk",label:"\u9009\u62E9\u7F13\u5B58\u6587\u4EF6",color:"blue-grey-10",onClick:v}),B(_e,{class:"col-shirk",label:"\u9009\u62E9\u6A21\u677F",color:"blue-grey-10",onClick:Fe}),B(_e,{class:"col-shirk",label:"\u4FDD\u5B58",color:"blue-grey-10",onClick:_[3]||(_[3]=S=>ee.value=!0)})]),B(wr,{class:"col-12",language:"javascript",modelValue:h.value,"onUpdate:modelValue":_[4]||(_[4]=S=>h.value=S),theme:"vs-dark",ref_key:"editor",ref:E},null,8,["modelValue"])]),ie("div",Yr,[ie("audio",{class:"col-grow full-width",src:s.value,controls:""},null,8,Kr),me.value.length>0?(we(),ke(Pe,{key:0,class:"col-grow",dark:""},{default:$(()=>[B(Ne,{class:"row q-gutter-sm"},{default:$(()=>[B(Me,{color:"red-7",name:"mdi-alert-circle-outline",size:"1.4rem"}),Gr,ie("code",Hr,[ie("pre",Xr,We(me.value),1)])]),_:1})]),_:1})):fr("",!0)])]),B(ze,{modelValue:O.value,"onUpdate:modelValue":_[7]||(_[7]=S=>O.value=S)},{default:$(()=>[B(Pe,{class:"bg-grey-10 text-grey-3",style:{"min-width":"300px",width:"40%"}},{default:$(()=>[B(Ne,null,{default:$(()=>[Jr]),_:1}),B(Ne,{class:"row q-gutter-x-sm"},{default:$(()=>[B(Dr,{class:"col",modelValue:k.value,"onUpdate:modelValue":_[5]||(_[5]=S=>k.value=S),vertical:"",style:{"max-width":"7rem"},"active-color":"blue-5"},{default:$(()=>[B(Ot,{label:"\u7F13\u5B58\u6587\u4EF6",name:"cache"}),B(Ot,{label:"\u81EA\u52A8\u4FDD\u5B58\u6587\u4EF6",name:"auto_saved"})]),_:1},8,["modelValue"]),B(Mr,{class:"col-grow bg-grey-10",modelValue:k.value,"onUpdate:modelValue":_[6]||(_[6]=S=>k.value=S)},{default:$(()=>[B(zt,{class:"q-pa-none row items-center",name:"cache"},{default:$(()=>[j.value.length>0?(we(),ke(Jt,{key:0,class:"col-grow",separator:""},{default:$(()=>[(we(!0),_t(Gt,null,Kt(j.value,S=>(we(),ke(Xt,{class:"q-px-md q-pb-md",clickable:"",onClick:fe=>F(S)},{default:$(()=>[B(Ht,{class:"row"},{default:$(()=>[ie("div",Zr,[ie("div",ea,[B(et,{class:"col"},{default:$(()=>[yt(We(S.name),1)]),_:2},1024),B(_e,{class:"col-shirk",icon:"mdi-delete",round:"",flat:"",size:".8rem",color:"negative",onClick:fe=>ae(S.name,fe)},null,8,["onClick"])]),B(et,{class:"col-12 text-grey-6",caption:""},{default:$(()=>[ie("code",null,[ie("pre",ta,We(S.src),1)])]),_:2},1024)])]),_:2},1024)]),_:2},1032,["onClick"]))),256))]),_:1})):(we(),_t("div",na,aa))]),_:1}),B(zt,{class:"q-pa-none row items-center",name:"auto_saved"},{default:$(()=>[oa]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),B(ze,{modelValue:he.value,"onUpdate:modelValue":_[9]||(_[9]=S=>he.value=S)},{default:$(()=>[B(Pe,{class:"bg-grey-10 text-grey-3",style:{"min-width":"400px"}},{default:$(()=>[B(Ur,{list:Object.entries(Lt(pt)).map(S=>({name:S[1].name,src:b(S[1].src),id:S[0]})),onItem_click:_[8]||(_[8]=S=>{var fe;return(fe=E.value)==null?void 0:fe.change_code(Lt(pt)[S].src)})},null,8,["list"])]),_:1})]),_:1},8,["modelValue"]),B(ze,{modelValue:ee.value,"onUpdate:modelValue":_[12]||(_[12]=S=>ee.value=S)},{default:$(()=>[B(Pe,{class:"bg-grey-10 text-grey-3",style:{"min-width":"400px"}},{default:$(()=>[B(Ne,null,{default:$(()=>[ua,B(Ge,{label:"\u6587\u4EF6\u540D",modelValue:G.value,"onUpdate:modelValue":_[10]||(_[10]=S=>G.value=S),"label-color":"blue-5","input-class":"text-white",suffix:".js",dark:"",rules:[S=>S.length!==0||"\u8BF7\u8F93\u5165\u81F3\u5C11\u4E00\u4E2A\u5B57\u7B26"]},null,8,["modelValue","rules"])]),_:1}),B(Mt,{align:"right"},{default:$(()=>[B(_e,{label:"\u4FDD\u5B58\u81F3\u672C\u5730",color:"blue-6",onClick:A,flat:""}),B(_e,{label:"\u4FDD\u5B58\u81F3\u7F13\u5B58",color:"purple-4",onClick:z,flat:""}),B(_e,{label:"\u53D6\u6D88",color:"grey-3",onClick:_[11]||(_[11]=S=>ee.value=!1),flat:""})]),_:1})]),_:1})]),_:1},8,["modelValue"]),B(ze,{modelValue:te.value,"onUpdate:modelValue":_[14]||(_[14]=S=>te.value=S)},{default:$(()=>[B(Pe,{class:"bg-grey-10 text-grey-3",style:{"min-width":"300px"}},{default:$(()=>[B(Ne,null,{default:$(()=>[ia]),_:1}),B(Mt,{align:"right"},{default:$(()=>[B(_e,{label:"\u786E\u8BA4",color:"blue-6",onClick:ce,flat:""}),B(_e,{label:"\u53D6\u6D88",color:"grey-3",onClick:_[13]||(_[13]=S=>te.value=!1),flat:""})]),_:1})]),_:1})]),_:1},8,["modelValue"]),B(ze,{modelValue:Ce.value,"onUpdate:modelValue":_[15]||(_[15]=S=>Ce.value=S)},{default:$(()=>[B(Pe,{class:"bg-grey-10 text-grey-3",style:{"min-width":"300px"}},{default:$(()=>[B(Ne,null,{default:$(()=>[B(Or,{icon:"mdi-alert-circle"}),la]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}});export{ya as default};
